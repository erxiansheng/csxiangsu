const MapCache={textures:{},geometries:{},materials:{},graffitiTextures:[],isPreloaded:!1},MapConfigs={indoor:{displayName:"å®¤å†…ç«žæŠ€åœº (Indoor)",gameMode:["deathmatch"],floorColor1:"#c4a574",floorColor2:"#a68b5b",wallColor1:"#c9a86c",wallColor2:"#a08050",skyColor:8900331,obstacles:[{x:-52,y:15,z:-19.5,w:65,h:30,d:2,color:12082232},{x:-19.5,y:15,z:-52,w:2,h:30,d:65,color:12082232},{x:-52,y:15,z:-84.5,w:65,h:30,d:2,color:12082232},{x:-84.5,y:15,z:-52,w:2,h:30,d:65,color:12082232},{x:52,y:15,z:-19.5,w:65,h:30,d:2,color:13935988},{x:19.5,y:15,z:-52,w:2,h:30,d:65,color:13935988},{x:52,y:15,z:-84.5,w:65,h:30,d:2,color:13935988},{x:84.5,y:15,z:-52,w:2,h:30,d:65,color:13935988},{x:-52,y:15,z:19.5,w:65,h:30,d:2,color:8036024},{x:-19.5,y:15,z:52,w:2,h:30,d:65,color:8036024},{x:-52,y:15,z:84.5,w:65,h:30,d:2,color:8036024},{x:-84.5,y:15,z:52,w:2,h:30,d:65,color:8036024},{x:52,y:15,z:19.5,w:65,h:30,d:2,color:10910802},{x:19.5,y:15,z:52,w:2,h:30,d:65,color:10910802},{x:52,y:15,z:84.5,w:65,h:30,d:2,color:10910802},{x:84.5,y:15,z:52,w:2,h:30,d:65,color:10910802}]},shipment:{displayName:"è¿è¾“èˆ¹ (Shipment)",gameMode:["deathmatch"],floorColor1:"#5a5a5a",floorColor2:"#4a4a4a",wallColor1:"#8b4513",wallColor2:"#5a2d0d",skyColor:7372944,obstacles:[{x:-55,y:8,z:-55,w:8,h:16,d:25,color:4876938},{x:-55,y:8,z:-25,w:25,h:16,d:8,color:4876938},{x:55,y:8,z:-55,w:8,h:16,d:25,color:4876938},{x:55,y:8,z:-25,w:25,h:16,d:8,color:4876938},{x:-55,y:8,z:55,w:8,h:16,d:25,color:4876938},{x:-55,y:8,z:25,w:25,h:16,d:8,color:4876938},{x:55,y:8,z:55,w:8,h:16,d:25,color:4876938},{x:55,y:8,z:25,w:25,h:16,d:8,color:4876938},{x:15,y:6,z:-25,w:20,h:12,d:8,color:4020797,rotation:.5},{x:-15,y:6,z:25,w:20,h:12,d:8,color:4020797,rotation:-.5},{x:25,y:6,z:5,w:18,h:12,d:8,color:4020797,rotation:.4},{x:-35,y:6,z:0,w:8,h:12,d:15,color:4020797},{x:-35,y:14,z:-5,w:8,h:8,d:10,color:4876874},{x:-40,y:4,z:-45,w:8,h:8,d:8,color:12886874},{x:40,y:4,z:-45,w:8,h:8,d:8,color:12886874},{x:-40,y:4,z:45,w:8,h:8,d:8,color:12886874},{x:40,y:4,z:45,w:8,h:8,d:8,color:12886874},{x:0,y:4,z:0,w:6,h:8,d:6,color:12886874},{x:0,y:8,z:-58,w:30,h:16,d:6,color:6974058},{x:0,y:8,z:58,w:30,h:16,d:6,color:6974058}]},office:{displayName:"åŠžå…¬å¤§æ¥¼ (Office)",gameMode:["deathmatch"],floorColor1:"#4a4a4a",floorColor2:"#3a3a3a",wallColor1:"#d4d4d4",wallColor2:"#a0a0a0",skyColor:7372944,obstacles:[{x:-40,y:8,z:-40,w:30,h:16,d:15},{x:40,y:8,z:40,w:30,h:16,d:15},{x:0,y:6,z:-50,w:40,h:12,d:8},{x:0,y:6,z:50,w:40,h:12,d:8}]},warehouse:{displayName:"ä»“åº“ (Warehouse)",gameMode:["deathmatch"],floorColor1:"#5a5a5a",floorColor2:"#4a4a4a",wallColor1:"#8b4513",wallColor2:"#5a2d0d",skyColor:7058393,obstacles:[{x:-50,y:12,z:-30,w:25,h:24,d:25},{x:50,y:12,z:30,w:25,h:24,d:25},{x:0,y:5,z:0,w:60,h:10,d:10}]},custom_shamo:{displayName:"æ²™æ¼ ç°",gameMode:["defuse"],floorColor1:"#c4a574",floorColor2:"#a68b5b",wallColor1:"#95a5a6",wallColor2:"#7f8c8d",skyColor:7058393,mapSize:300,obstacles:[{x:-300,y:10,z:280,w:40,h:20,d:2,rotation:1.571,textureType:"brick"},{x:300,y:10,z:280,w:40,h:20,d:2,rotation:1.571,textureType:"brick"},{x:-300,y:10,z:240,w:40,h:20,d:2,rotation:1.571,textureType:"brick"},{x:300,y:10,z:240,w:40,h:20,d:2,rotation:1.571,textureType:"brick"},{x:-300,y:10,z:200,w:40,h:20,d:2,rotation:1.571,textureType:"brick"},{x:300,y:10,z:200,w:40,h:20,d:2,rotation:1.571,textureType:"brick"},{x:-300,y:10,z:160,w:40,h:20,d:2,rotation:1.571,textureType:"brick"},{x:300,y:10,z:160,w:40,h:20,d:2,rotation:1.571,textureType:"brick"},{x:-300,y:10,z:120,w:40,h:20,d:2,rotation:1.571,textureType:"brick"},{x:300,y:10,z:120,w:40,h:20,d:2,rotation:1.571,textureType:"brick"},{x:-300,y:10,z:80,w:40,h:20,d:2,rotation:1.571,textureType:"brick"},{x:300,y:10,z:80,w:40,h:20,d:2,rotation:1.571,textureType:"brick"},{x:-300,y:10,z:40,w:40,h:20,d:2,rotation:1.571,textureType:"brick"},{x:300,y:10,z:40,w:40,h:20,d:2,rotation:1.571,textureType:"brick"},{x:-300,y:10,z:0,w:40,h:20,d:2,rotation:1.571,textureType:"brick"},{x:300,y:10,z:0,w:40,h:20,d:2,rotation:1.571,textureType:"brick"},{x:-300,y:10,z:-40,w:40,h:20,d:2,rotation:1.571,textureType:"brick"},{x:300,y:10,z:-40,w:40,h:20,d:2,rotation:1.571,textureType:"brick"},{x:-300,y:10,z:-80,w:40,h:20,d:2,rotation:1.571,textureType:"brick"},{x:300,y:10,z:-80,w:40,h:20,d:2,rotation:1.571,textureType:"brick"},{x:-300,y:10,z:-120,w:40,h:20,d:2,rotation:1.571,textureType:"brick"},{x:300,y:10,z:-120,w:40,h:20,d:2,rotation:1.571,textureType:"brick"},{x:-300,y:10,z:-160,w:40,h:20,d:2,rotation:1.571,textureType:"brick"},{x:300,y:10,z:-160,w:40,h:20,d:2,rotation:1.571,textureType:"brick"},{x:-300,y:10,z:-200,w:40,h:20,d:2,rotation:1.571,textureType:"brick"},{x:300,y:10,z:-200,w:40,h:20,d:2,rotation:1.571,textureType:"brick"},{x:-300,y:10,z:-240,w:40,h:20,d:2,rotation:1.571,textureType:"brick"},{x:300,y:10,z:-240,w:40,h:20,d:2,rotation:1.571,textureType:"brick"},{x:-300,y:10,z:-280,w:40,h:20,d:2,rotation:1.571,textureType:"brick"},{x:300,y:10,z:-280,w:40,h:20,d:2,rotation:1.571,textureType:"brick"},{x:-280,y:10,z:300,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:-280,y:10,z:-300,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:-240,y:10,z:300,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:-240,y:10,z:-300,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:-200,y:10,z:300,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:-200,y:10,z:-300,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:-160,y:10,z:300,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:-160,y:10,z:-300,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:-120,y:10,z:300,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:-120,y:10,z:-300,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:-80,y:10,z:300,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:-80,y:10,z:-300,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:-40,y:10,z:300,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:-40,y:10,z:-300,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:0,y:10,z:300,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:0,y:10,z:-300,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:40,y:10,z:300,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:40,y:10,z:-300,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:80,y:10,z:300,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:80,y:10,z:-300,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:120,y:10,z:300,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:120,y:10,z:-300,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:160,y:10,z:300,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:160,y:10,z:-300,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:200,y:10,z:300,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:200,y:10,z:-300,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:240,y:10,z:300,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:240,y:10,z:-300,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:280,y:10,z:300,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:280,y:10,z:-300,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:-142,y:10,z:234,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:-106,y:10,z:234,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:-70,y:10,z:234,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:-30,y:10,z:234,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:4,y:10,z:234,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:50,y:10,z:234,w:32,h:20,d:1,rotation:3.142,textureType:"brick"},{x:82,y:10,z:234,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:120,y:10,z:234,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:138,y:10,z:190,w:40,h:20,d:2,rotation:7.854,textureType:"brick"},{x:138,y:10,z:150,w:40,h:20,d:2,rotation:10.996,textureType:"brick"},{x:118,y:10,z:208,w:40,h:20,d:2,rotation:12.567,textureType:"brick"},{x:70,y:10,z:162,w:40,h:20,d:2,rotation:17.279,textureType:"brick"},{x:70,y:10,z:122,w:40,h:20,d:2,rotation:17.279,textureType:"brick"},{x:6,y:10,z:154,w:40,h:20,d:2,rotation:17.279,textureType:"brick"},{x:6,y:10,z:194,w:40,h:20,d:2,rotation:17.279,textureType:"brick"},{x:8,y:10,z:212,w:43,h:20,d:2,rotation:1.571,textureType:"brick"},{x:6,y:10,z:114,w:40,h:20,d:2,rotation:1.571,textureType:"brick"},{x:6,y:10,z:74,w:40,h:20,d:2,rotation:1.571,textureType:"brick"},{x:6,y:10,z:34,w:40,h:20,d:2,rotation:1.571,textureType:"brick"},{x:6,y:10,z:-6,w:40,h:20,d:2,rotation:1.571,textureType:"brick"},{x:6,y:10,z:-46,w:40,h:20,d:2,rotation:1.571,textureType:"brick"},{x:6,y:10,z:-86,w:40,h:20,d:2,rotation:1.571,textureType:"brick"},{x:-14,y:10,z:-106,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:90,y:10,z:102,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:138,y:10,z:110,w:20,h:20,d:2,rotation:4.713,textureType:"brick"},{x:120,y:10,z:102,w:40,h:20,d:2,rotation:9.425,textureType:"brick"},{x:-14,y:10,z:-142,w:40,h:20,d:2,rotation:9.425,textureType:"brick"},{x:6,y:10,z:-164,w:40,h:20,d:2,rotation:10.996,textureType:"brick"},{x:74,y:10,z:-182,w:69,h:20,d:2,rotation:25.133,textureType:"brick"},{x:0,y:10,z:-186,w:40,h:20,d:2,rotation:21.991,textureType:"brick"},{x:156,y:10,z:38,w:43,h:20,d:2,rotation:3.142,textureType:"brick"},{x:136,y:10,z:16,w:44,h:20,d:2,rotation:7.854,textureType:"brick"},{x:136,y:10,z:-24,w:40,h:20,d:2,rotation:7.854,textureType:"brick"},{x:136,y:10,z:-64,w:40,h:20,d:2,rotation:7.854,textureType:"brick"},{x:136,y:10,z:-104,w:40,h:20,d:2,rotation:7.854,textureType:"brick"},{x:136,y:10,z:-144,w:40,h:20,d:2,rotation:7.854,textureType:"brick"},{x:280,y:10,z:38,w:40,h:20,d:2,rotation:9.425,textureType:"brick"},{x:244,y:10,z:38,w:40,h:20,d:2,rotation:9.425,textureType:"brick"},{x:140,y:10,z:126,w:40,h:20,d:2,rotation:1.571,textureType:"brick"},{x:104,y:4,z:6,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:104,y:4,z:-2,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:104,y:4,z:14,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:104,y:4,z:22,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:104,y:4,z:30,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:104,y:4,z:-10,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:104,y:4,z:-18,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:104,y:4,z:-26,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:104,y:4,z:-34,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:104,y:4,z:-42,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:104,y:4,z:-50,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:104,y:4,z:-58,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:104,y:4,z:-66,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:104,y:4,z:-74,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:104,y:4,z:-82,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:104,y:4,z:-90,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:104,y:4,z:-98,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:104,y:4,z:-106,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:104,y:4,z:-114,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:104,y:4,z:-122,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:104,y:4,z:-130,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:104,y:4,z:-138,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:104,y:4,z:-146,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:104,y:4,z:-162,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:104,y:4,z:-170,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:112,y:10,z:-182,w:46,h:20,d:2,rotation:9.425,textureType:"brick"},{x:134,y:10,z:-204,w:43,h:20,d:2,rotation:10.996,textureType:"brick"},{x:186,y:10,z:-192,w:43,h:20,d:2,rotation:12.567,textureType:"brick"},{x:158,y:10,z:-36,w:44,h:20,d:2,rotation:12.567,textureType:"brick"},{x:248,y:10,z:-16,w:40,h:20,d:2,rotation:14.137,textureType:"brick"},{x:250,y:10,z:16,w:44,h:20,d:2,rotation:14.137,textureType:"brick"},{x:206,y:10,z:-170,w:44,h:20,d:2,rotation:14.137,textureType:"brick"},{x:206,y:10,z:-130,w:40,h:20,d:2,rotation:14.137,textureType:"brick"},{x:164,y:10,z:-94,w:56,h:20,d:2,rotation:18.85,textureType:"brick"},{x:-278,y:10,z:232,w:40,h:20,d:2,rotation:12.567,textureType:"brick"},{x:-240,y:10,z:232,w:44,h:20,d:2,rotation:15.708,textureType:"brick"},{x:-218,y:10,z:252,w:40,h:20,d:2,rotation:20.421,textureType:"brick"},{x:-216,y:10,z:278,w:40,h:20,d:2,rotation:20.421,textureType:"brick"},{x:-54,y:10,z:-106,w:40,h:20,d:2,rotation:25.133,textureType:"brick"},{x:-94,y:10,z:-106,w:40,h:20,d:2,rotation:25.133,textureType:"brick"},{x:-108,y:10,z:-84,w:40,h:20,d:2,rotation:26.704,textureType:"brick"},{x:-108,y:10,z:-44,w:40,h:20,d:2,rotation:26.704,textureType:"brick"},{x:-108,y:10,z:-4,w:40,h:20,d:2,rotation:26.704,textureType:"brick"},{x:-108,y:10,z:36,w:40,h:20,d:2,rotation:26.704,textureType:"brick"},{x:-108,y:10,z:76,w:40,h:20,d:2,rotation:26.704,textureType:"brick"},{x:-108,y:10,z:116,w:40,h:20,d:2,rotation:26.704,textureType:"brick"},{x:-108,y:10,z:156,w:40,h:20,d:2,rotation:26.704,textureType:"brick"},{x:-108,y:10,z:196,w:40,h:20,d:2,rotation:26.704,textureType:"brick"},{x:-110,y:9,z:212,w:44,h:18,d:2,rotation:26.704,textureType:"brick"},{x:-54,y:10,z:-142,w:40,h:20,d:2,rotation:28.275,textureType:"brick"},{x:-92,y:10,z:-142,w:40,h:20,d:2,rotation:28.275,textureType:"brick"},{x:-132,y:10,z:-142,w:40,h:20,d:2,rotation:28.275,textureType:"brick"},{x:-172,y:10,z:-142,w:40,h:20,d:2,rotation:28.275,textureType:"brick"},{x:-210,y:10,z:-142,w:40,h:20,d:2,rotation:28.275,textureType:"brick"},{x:-280,y:10,z:-142,w:40,h:20,d:2,rotation:28.275,textureType:"brick"},{x:-260,y:10,z:-164,w:44,h:20,d:2,rotation:29.845,textureType:"brick"},{x:-230,y:10,z:-164,w:45,h:20,d:2,rotation:29.845,textureType:"brick"},{x:-280,y:10,z:-186,w:40,h:20,d:2,rotation:34.558,textureType:"brick"},{x:-174,y:10,z:-194,w:39,h:20,d:2,rotation:42.412,textureType:"brick"},{x:-172,y:10,z:-278,w:40,h:20,d:2,rotation:42.412,textureType:"brick"},{x:-170,y:10,z:-250,w:40,h:20,d:2,rotation:42.412,textureType:"brick"},{x:-134,y:10,z:-106,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:-174,y:10,z:-106,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:-276,y:10,z:-104,w:50,h:20,d:2,rotation:3.142,textureType:"brick"},{x:-248,y:10,z:-104,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:-154,y:10,z:-174,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:-78,y:10,z:-174,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:-38,y:10,z:-174,w:40,h:20,d:2,rotation:6.283,textureType:"brick"},{x:136,y:10,z:-276,w:40,h:20,d:2,rotation:7.854,textureType:"brick"},{x:-22,y:4,z:-180,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:-22,y:12,z:-180,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:-22,y:20,z:-180,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:178,y:10,z:-256,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:218,y:10,z:-256,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:236,y:10,z:-234,w:42,h:20,d:2,rotation:4.713,textureType:"brick"},{x:-292,y:4,z:-250,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:-284,y:4,z:-250,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:-276,y:4,z:-250,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:-276,y:12,z:-250,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:-292,y:12,z:-250,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:-254,y:4,z:-250,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:-254,y:4,z:-258,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:-254,y:4,z:-266,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:-254,y:4,z:-274,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:-254,y:4,z:-282,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:-254,y:4,z:-290,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:-254,y:12,z:-250,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:-254,y:12,z:-258,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:-254,y:12,z:-274,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:-254,y:12,z:-282,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:104,y:12,z:-162,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:104,y:12,z:-138,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:104,y:12,z:-130,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:104,y:12,z:-114,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:104,y:12,z:-106,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:104,y:12,z:-90,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:104,y:12,z:-82,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:104,y:12,z:-66,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:104,y:12,z:-58,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:104,y:12,z:-42,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:104,y:12,z:-34,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:104,y:12,z:-18,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:104,y:12,z:-10,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:104,y:12,z:6,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:104,y:12,z:22,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:29,y:4,z:233,w:5,h:8,d:10,rotation:1.571,textureType:"wood"},{x:104,y:4,z:-154,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:104,y:12,z:-146,w:8,h:8,d:8,color:9139029,rotation:1.571,textureType:"metal"},{x:104,y:4,z:-177,w:8,h:8,d:9,color:9139029,rotation:1.571,textureType:"metal"},{x:-210,y:10,z:-186,w:40,h:20,d:2,textureType:"brick"},{x:-194,y:10,z:-186,w:40,h:20,d:2,textureType:"brick"},{x:156,y:10,z:-162,w:40,h:20,d:2,textureType:"brick"},{x:280,y:10,z:228,w:40,h:20,d:2,textureType:"brick"},{x:240,y:10,z:228,w:40,h:20,d:2,textureType:"brick"},{x:200,y:10,z:282,w:40,h:20,d:2,rotation:4.712,textureType:"brick"},{x:220,y:10,z:228,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:200,y:10,z:248,w:40,h:20,d:2,rotation:4.712,textureType:"brick"},{x:70,y:10,z:186,w:40,h:20,d:2,rotation:4.712,textureType:"brick"},{x:88,y:10,z:206,w:40,h:20,d:2,textureType:"brick"},{x:210,y:10,z:38,w:40,h:20,d:2,textureType:"brick"},{x:166,y:10,z:-174,w:40,h:20,d:2,rotation:1.571,textureType:"brick"},{x:186,y:10,z:-94,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:206,y:10,z:-114,w:40,h:20,d:2,rotation:4.712,textureType:"brick"},{x:136,y:10,z:-260,w:40,h:20,d:2,rotation:1.571,textureType:"brick"},{x:-186,y:10,z:-106,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:52,y:10,z:-182,w:40,h:20,d:2,textureType:"brick"},{x:-230,y:10,z:-86,w:40,h:20,d:2,rotation:1.571,textureType:"brick"},{x:-206,y:10,z:-88,w:40,h:20,d:2,rotation:1.571,textureType:"brick"},{x:-186,y:10,z:-70,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:-150,y:10,z:-70,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:-128,y:10,z:-70,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:-250,y:10,z:-66,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:-280,y:10,z:-66,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:-72,y:4,z:-138,w:8,h:8,d:8,color:9139029,textureType:"metal"},{x:-72,y:4,z:-130,w:8,h:8,d:8,color:9139029,textureType:"metal"},{x:214,y:10,z:-36,w:40,h:20,d:2,textureType:"brick"},{x:228,y:10,z:-34,w:40,h:20,d:2,textureType:"brick"},{x:-116,y:10,z:-174,w:40,h:20,d:2,rotation:3.142,textureType:"brick"},{x:142,y:5,z:-290,w:10,h:10,d:10,textureType:"wood"},{x:32,y:8,z:-180,w:8,h:16,d:2,rotation:1.571,textureType:"wood"},{x:20,y:8,z:-182,w:8,h:16,d:2,rotation:1.571,textureType:"wood"},{x:6,y:8,z:-140,w:8,h:16,d:2,rotation:1.571,textureType:"wood"},{x:6,y:8,z:-132,w:8,h:16,d:2,rotation:1.571,textureType:"wood"},{x:6,y:8,z:-110,w:8,h:16,d:2,rotation:1.571,textureType:"wood"},{x:-214,y:10,z:230,w:40,h:20,d:2,textureType:"brick"},{x:-130,y:10,z:52,w:43,h:20,d:2,textureType:"brick"},{x:242,y:5,z:-224,w:10,h:10,d:10,textureType:"wood"},{x:252,y:5,z:-224,w:10,h:10,d:10,textureType:"wood"},{x:256,y:5,z:-10,w:10,h:10,d:10,textureType:"wood"},{x:266,y:5,z:-10,w:10,h:10,d:10,textureType:"wood"},{x:256,y:15,z:-10,w:10,h:10,d:10,textureType:"wood"}],bombSites:{A:{x:240,z:-278,radius:20},B:{x:-200,z:-278,radius:20}},spawnPoints:{ct:[{x:94,z:-276},{x:90,z:-254},{x:66,z:-260},{x:-60,z:-272},{x:-40,z:-252}],t:[{x:-32,z:246},{x:-20,z:268},{x:-40,z:270},{x:58,z:250},{x:58,z:274}]}}},MapNames={};for(const[t,e]of Object.entries(MapConfigs))MapNames[t]=e.displayName||t;class MapBuilder{constructor(t){this.scene=t,this.walls=[]}createBrickWallTexture(t){const e=`brick_${t}`;if(MapCache.textures[e])return MapCache.textures[e];const r=document.createElement("canvas");r.width=128,r.height=128;const o=r.getContext("2d"),a=t>>16&255,x=t>>8&255,i=255&t;o.fillStyle=`rgb(${Math.floor(.7*a)},${Math.floor(.7*x)},${Math.floor(.7*i)})`,o.fillRect(0,0,128,128);for(let t=0;t<8;t++){const e=t%2*16;for(let r=-1;r<5;r++){const y=32*r+e,c=16*t,h=30*(Math.random()-.5),n=Math.min(255,Math.max(0,a+h)),d=Math.min(255,Math.max(0,x+.8*h)),w=Math.min(255,Math.max(0,i+.6*h));o.fillStyle=`rgb(${Math.floor(n)},${Math.floor(d)},${Math.floor(w)})`,o.fillRect(y+2,c+2,28,12),o.fillStyle="rgba(255,255,255,0.1)",o.fillRect(y+2,c+2,28,2),o.fillStyle="rgba(0,0,0,0.15)",o.fillRect(y+2,c+16-2-2,28,2)}}o.fillStyle="rgba(0,0,0,0.05)";for(let t=0;t<20;t++){const t=128*Math.random(),e=128*Math.random(),r=8*Math.random()+2;o.beginPath(),o.arc(t,e,r,0,2*Math.PI),o.fill()}const y=new THREE.CanvasTexture(r);return y.wrapS=THREE.RepeatWrapping,y.wrapT=THREE.RepeatWrapping,y.repeat.set(4,4),MapCache.textures[e]=y,y}createConcreteTexture(t){const e=`concrete_${t}`;if(MapCache.textures[e])return MapCache.textures[e];const r=document.createElement("canvas");r.width=64,r.height=64;const o=r.getContext("2d"),a=t>>16&255,x=t>>8&255,i=255&t;o.fillStyle=`rgb(${a},${x},${i})`,o.fillRect(0,0,64,64);for(let t=0;t<500;t++){const t=64*Math.random(),e=64*Math.random(),r=40*Math.random()-20,y=Math.min(255,Math.max(0,a+r)),c=Math.min(255,Math.max(0,x+r)),h=Math.min(255,Math.max(0,i+r));o.fillStyle=`rgb(${Math.floor(y)},${Math.floor(c)},${Math.floor(h)})`,o.fillRect(t,e,1,1)}o.strokeStyle="rgba(0,0,0,0.2)",o.lineWidth=1;for(let t=0;t<3;t++){o.beginPath();let t=64*Math.random(),e=64*Math.random();o.moveTo(t,e);for(let r=0;r<5;r++)t+=15*(Math.random()-.5),e+=10*Math.random(),o.lineTo(t,e);o.stroke()}o.fillStyle="rgba(0,0,0,0.08)";for(let t=0;t<5;t++){const t=64*Math.random(),e=64*Math.random(),r=15*Math.random()+5,a=20*Math.random()+10;o.beginPath(),o.ellipse(t,e,r,a,0,0,2*Math.PI),o.fill()}const y=new THREE.CanvasTexture(r);return y.wrapS=THREE.RepeatWrapping,y.wrapT=THREE.RepeatWrapping,y.repeat.set(6,6),MapCache.textures[e]=y,y}createMetalTexture(t){const e=`metal_${t}`;if(MapCache.textures[e])return MapCache.textures[e];const r=document.createElement("canvas");r.width=64,r.height=64;const o=r.getContext("2d"),a=t>>16&255,x=t>>8&255,i=255&t;o.fillStyle=`rgb(${a},${x},${i})`,o.fillRect(0,0,64,64);for(let t=0;t<8;t++){const e=8*t;o.fillStyle="rgba(255,255,255,0.1)",o.fillRect(0,e,64,2),o.fillStyle="rgba(0,0,0,0.1)",o.fillRect(0,e+4,64,2)}o.fillStyle="rgba(0,0,0,0.3)";for(let t=0;t<4;t++)for(let e=0;e<4;e++)o.beginPath(),o.arc(8+16*t,8+16*e,2,0,2*Math.PI),o.fill();o.fillStyle="rgba(139, 69, 19, 0.2)";for(let t=0;t<8;t++){const t=64*Math.random(),e=64*Math.random(),r=6*Math.random()+2;o.beginPath(),o.arc(t,e,r,0,2*Math.PI),o.fill()}const y=new THREE.CanvasTexture(r);return y.wrapS=THREE.RepeatWrapping,y.wrapT=THREE.RepeatWrapping,y.repeat.set(4,4),MapCache.textures[e]=y,y}createWoodTexture(t){const e=`wood_${t}`;if(MapCache.textures[e])return MapCache.textures[e];const r=document.createElement("canvas");r.width=64,r.height=64;const o=r.getContext("2d"),a=t>>16&255,x=t>>8&255,i=255&t;o.fillStyle=`rgb(${a},${x},${i})`,o.fillRect(0,0,64,64),o.strokeStyle=`rgba(${Math.floor(.7*a)},${Math.floor(.7*x)},${Math.floor(.7*i)}, 0.4)`,o.lineWidth=1;for(let t=0;t<20;t++){const e=3*t+2*Math.random();o.beginPath(),o.moveTo(0,e);for(let t=0;t<64;t+=5)o.lineTo(t,e+2*(Math.random()-.5));o.stroke()}o.strokeStyle="rgba(0,0,0,0.3)",o.lineWidth=2,o.strokeRect(2,2,60,60),o.fillStyle="rgba(80,80,80,0.8)",o.beginPath(),o.arc(8,8,2,0,2*Math.PI),o.fill(),o.beginPath(),o.arc(56,8,2,0,2*Math.PI),o.fill(),o.beginPath(),o.arc(8,56,2,0,2*Math.PI),o.fill(),o.beginPath(),o.arc(56,56,2,0,2*Math.PI),o.fill();const y=new THREE.CanvasTexture(r);return y.wrapS=THREE.RepeatWrapping,y.wrapT=THREE.RepeatWrapping,y.repeat.set(2,2),MapCache.textures[e]=y,y}getWallTexture(t,e="default"){const r=t>>16&255,o=t>>8&255,a=255&t;return a>r&&a>o||o>r&&o>a?this.createMetalTexture(t):r>150&&o>100&&a<100?Math.random()>.5?this.createWoodTexture(t):this.createBrickWallTexture(t):Math.abs(r-o)<30&&Math.abs(o-a)<30?this.createConcreteTexture(t):this.createBrickWallTexture(t)}createWallTexture(t){const e=`wall_${t}`;if(MapCache.textures[e])return MapCache.textures[e];const r=document.createElement("canvas");r.width=16,r.height=16;const o=r.getContext("2d"),a=t>>16&255,x=t>>8&255,i=255&t;o.fillStyle=`rgb(${a},${x},${i})`,o.fillRect(0,0,16,16),o.strokeStyle="rgba(0,0,0,0.12)",o.lineWidth=1,o.strokeRect(0,0,16,8),o.strokeRect(8,8,16,8);const y=new THREE.CanvasTexture(r);return y.wrapS=THREE.RepeatWrapping,y.wrapT=THREE.RepeatWrapping,y.repeat.set(8,8),MapCache.textures[e]=y,y}createFloorTexture(t,e){const r=`floor_${t}_${e}`;if(MapCache.textures[r])return MapCache.textures[r];const o=document.createElement("canvas");o.width=64,o.height=64;const a=o.getContext("2d");a.fillStyle=t,a.fillRect(0,0,64,64),a.fillStyle=e||t;for(let t=0;t<4;t++)for(let e=0;e<4;e++)(t+e)%2==0&&a.fillRect(16*t,16*e,16,16);a.fillStyle="rgba(0,0,0,0.05)";for(let t=0;t<100;t++){const t=64*Math.random(),e=64*Math.random();a.fillRect(t,e,1,1)}a.strokeStyle="rgba(0,0,0,0.1)",a.lineWidth=1;for(let t=0;t<=4;t++)a.beginPath(),a.moveTo(16*t,0),a.lineTo(16*t,64),a.stroke(),a.beginPath(),a.moveTo(0,16*t),a.lineTo(64,16*t),a.stroke();const x=new THREE.CanvasTexture(o);return x.wrapS=THREE.RepeatWrapping,x.wrapT=THREE.RepeatWrapping,x.repeat.set(30,30),MapCache.textures[r]=x,x}createGraffitiTexture(t,e,r){const o=document.createElement("canvas");o.width=256,o.height=128;const a=o.getContext("2d");return a.fillStyle=e||"rgba(0,0,0,0.3)",a.fillRect(0,0,256,128),a.strokeStyle=r||"#ff6600",a.lineWidth=3,a.strokeRect(5,5,246,118),a.fillStyle=r||"#ff6600",a.font="bold 24px Arial",a.textAlign="center",a.textBaseline="middle",a.shadowColor="rgba(0,0,0,0.5)",a.shadowBlur=4,a.shadowOffsetX=2,a.shadowOffsetY=2,a.fillText(t,128,64),new THREE.CanvasTexture(o)}createBilibiliGraffiti(){const t=document.createElement("canvas");t.width=256,t.height=128;const e=t.getContext("2d");return e.fillStyle="rgba(251, 114, 153, 0.8)",e.fillRect(0,0,256,128),e.strokeStyle="#ffffff",e.lineWidth=4,e.strokeRect(8,8,240,112),e.fillStyle="#ffffff",e.font="bold 20px Arial",e.textAlign="center",e.shadowColor="rgba(0,0,0,0.3)",e.shadowBlur=2,e.fillText("Bç«™UPä¸»",128,40),e.font="bold 28px Arial",e.fillText("1603366374",128,80),e.font="16px Arial",e.fillText("â­ å…³æ³¨ä¸€ä¸‹ â­",128,110),new THREE.CanvasTexture(t)}createRandomGraffiti(){const t=[{text:"CS 1.6",color:"#00ff00",bg:"rgba(0,50,0,0.7)"},{text:"HEADSHOT!",color:"#ff0000",bg:"rgba(50,0,0,0.7)"},{text:"GG",color:"#ffff00",bg:"rgba(50,50,0,0.7)"},{text:"RUSH B!",color:"#ff6600",bg:"rgba(50,25,0,0.7)"},{text:"NO SCOPE",color:"#00ffff",bg:"rgba(0,50,50,0.7)"},{text:"ACE",color:"#ff00ff",bg:"rgba(50,0,50,0.7)"},{text:"CLUTCH",color:"#ffffff",bg:"rgba(30,30,30,0.7)"},{text:"EZ WIN",color:"#00ff00",bg:"rgba(0,30,0,0.7)"}],e=t[Math.floor(Math.random()*t.length)];return this.createGraffitiTexture(e.text,e.bg,e.color)}addGraffitiToWall(t,e,r,o,a=1){const x=Math.random()<.3?this.createBilibiliGraffiti():this.createRandomGraffiti(),i=new THREE.PlaneGeometry(8*a,4*a),y=new THREE.MeshBasicMaterial({map:x,transparent:!0,side:THREE.DoubleSide,depthTest:!0,depthWrite:!1}),c=new THREE.Mesh(i,y);c.position.set(t,e,r),c.rotation.y=o,this.scene.add(c)}getGeometry(t,e,r){const o=`box_${t}_${e}_${r}`;return MapCache.geometries[o]||(MapCache.geometries[o]=new THREE.BoxGeometry(t,e,r)),{geom:MapCache.geometries[o],isBox:!0}}etry(t,e,r){const o=Math.max(t,r),a=`plane_${o}_${e}`;return MapCache.geometries[a]||(MapCache.geometries[a]=new THREE.PlaneGeometry(o,e)),{geom:MapCache.geometries[a],isPlane:!0,faceZ:t<=r}}getMaterial(t){const e=t||8947848,r=`mat_textured_${e}`;if(!MapCache.materials[r]){const t=this.getWallTexture(e);MapCache.materials[r]=new THREE.MeshLambertMaterial({map:t,side:THREE.DoubleSide})}return MapCache.materials[r]}getMaterialByType(t,e){const r=t||8947848,o=`mat_${e}_${r}`;if(!MapCache.materials[o]){let t;switch(e){case"wood":case"woodDoor":t=this.createWoodTexture(r);break;case"brick":t=this.createBrickWallTexture(r);break;case"concrete":case"sandbag":t=this.createConcreteTexture(r);break;case"metal":case"barrel":t=this.createMetalTexture(r);break;case"floor":const e=r>>16&255,o=r>>8&255,a=255&r,x=`rgb(${e},${o},${a})`,i=`rgb(${Math.floor(.85*e)},${Math.floor(.85*o)},${Math.floor(.85*a)})`;t=this.createFloorTexture(x,i);break;default:t=this.getWallTexture(r)}MapCache.materials[o]=new THREE.MeshLambertMaterial({map:t,side:THREE.DoubleSide})}return MapCache.materials[o]}getSimpleMaterial(t){const e=`mat_simple_${t}`;if(!MapCache.materials[e]){const r=this.createConcreteTexture(t||5592405);MapCache.materials[e]=new THREE.MeshLambertMaterial({map:r,side:THREE.DoubleSide})}return MapCache.materials[e]}createMap(t){const e=MapConfigs[t]||MapConfigs.dust2,r="indoor"===t,o=e.mapSize||125,a=2*o+50,x=o,i=this.createFloorTexture(e.floorColor1,e.floorColor2);i.repeat.set(a/16,a/16);const y=`floor_${a}`;MapCache.geometries[y]||(MapCache.geometries[y]=new THREE.PlaneGeometry(a,a));const c=new THREE.Mesh(MapCache.geometries[y],new THREE.MeshLambertMaterial({map:i}));c.rotation.x=-Math.PI/2,c.name="floor",this.scene.add(c);const h=this,n=(t,e,r,o,a,x,i=null,y=0,c=!1,n=null)=>{const d=h.getGeometry(o,a,x);let w;w=c?h.getSimpleMaterial(i):n?h.getMaterialByType(i,n):h.getMaterial(i);const p=new THREE.Mesh(d.geom,w);p.position.set(t,e,r),y&&(p.rotation.y=y),h.scene.add(p),y&&0!==y?h.walls.push({mesh:p,x:t-o/2,z:r-x/2,w:o,d:x,h:e+a/2,hBottom:e-a/2,rotation:y,originalW:o,originalD:x,centerX:t,centerZ:r}):h.walls.push({mesh:p,x:t-o/2,z:r-x/2,w:o,d:x,h:e+a/2,hBottom:e-a/2,rotation:0})};if(n(0,15,-x,2*x,30,5,5592405,0,!0),n(0,15,x,2*x,30,5,5592405,0,!0),n(-x,15,0,5,30,2*x,5592405,0,!0),n(x,15,0,5,30,2*x,5592405,0,!0),(e.objects||e.obstacles||[]).forEach(t=>{n(t.x,t.y,t.z,t.w,t.h,t.d,t.color,t.rotation||0,!1,t.textureType)}),r&&((t,e,r,o,a)=>{MapCache.geometries.roof_250_250||(MapCache.geometries.roof_250_250=new THREE.PlaneGeometry(o,a));const x=h.getMaterial(4868682),i=new THREE.Mesh(MapCache.geometries.roof_250_250,x);i.position.set(0,30,0),i.rotation.x=-Math.PI/2,h.scene.add(i)})(0,0,0,250,250),(!t||!t.startsWith("custom_"))&&(this.addGraffitiToWall(-40,10,.1-x,0,1.2),this.addGraffitiToWall(40,12,.1-x,0,1),this.addGraffitiToWall(-30,8,x-.1,Math.PI,1),this.addGraffitiToWall(50,14,x-.1,Math.PI,1.3),this.addGraffitiToWall(.1-x,10,-20,Math.PI/2,1),this.addGraffitiToWall(.1-x,12,40,Math.PI/2,1.1),this.addGraffitiToWall(x-.1,8,0,-Math.PI/2,1.2),this.addGraffitiToWall(x-.1,15,-50,-Math.PI/2,1),e.obstacles.length>0)){const t=Math.min(6,e.obstacles.length),r=new Set;for(let o=0;o<t;o++){let t;do{t=Math.floor(Math.random()*e.obstacles.length)}while(r.has(t)&&r.size<e.obstacles.length);r.add(t);const o=e.obstacles[t];if(o.w>o.d){const t=Math.random()>.5?1:-1;this.addGraffitiToWall(o.x,o.y,o.z+.1*t,t>0?0:Math.PI,.8)}else{const t=Math.random()>.5?1:-1;this.addGraffitiToWall(o.x+.1*t,o.y,o.z,t>0?-Math.PI/2:Math.PI/2,.8)}}}return this.scene.background=new THREE.Color(e.skyColor),e.bombSites&&this.createBombSiteMarkers(e.bombSites),this.scene.fog=null,this.walls}createBombSiteMarkers(t){t.A&&(this.createSiteGraffiti("A",t.A.x,t.A.z,"#ff6600"),this.createBombSiteAnimation(t.A.x,t.A.z,t.A.radius,"#ff6600")),t.B&&(this.createSiteGraffiti("B",t.B.x,t.B.z,"#ff6600"),this.createBombSiteAnimation(t.B.x,t.B.z,t.B.radius,"#ff6600"))}createSiteGraffiti(t,e,r,o){const a=document.createElement("canvas");a.width=256,a.height=256;const x=a.getContext("2d");x.clearRect(0,0,256,256),x.fillStyle=o,x.font="bold 180px Arial",x.textAlign="center",x.textBaseline="middle",x.shadowColor="rgba(0,0,0,0.8)",x.shadowBlur=10,x.shadowOffsetX=5,x.shadowOffsetY=5,x.fillText(t,128,128),x.strokeStyle="#fff",x.lineWidth=4,x.strokeText(t,128,128),x.strokeStyle=o,x.lineWidth=3,x.shadowBlur=5,x.beginPath(),x.arc(128,128,110,0,2*Math.PI),x.stroke();const i=new THREE.CanvasTexture(a),y=new THREE.PlaneGeometry(30,30),c=new THREE.MeshBasicMaterial({map:i,transparent:!0,opacity:.8,side:THREE.DoubleSide,depthWrite:!1}),h=new THREE.Mesh(y,c);h.position.set(e,.1,r),h.rotation.x=-Math.PI/2,this.scene.add(h)}createBombSiteAnimation(t,e,r,o){const a=[];for(let x=0;x<3;x++){const i=new THREE.RingGeometry(.8*r,r,32),y=new THREE.MeshBasicMaterial({color:o,transparent:!0,opacity:.3,side:THREE.DoubleSide,depthWrite:!1}),c=new THREE.Mesh(i,y);c.position.set(t,.05+.02*x,e),c.rotation.x=-Math.PI/2,c.userData.phase=x*(2*Math.PI/3),c.userData.baseOpacity=.3,this.scene.add(c),a.push(c)}const x=()=>{const t=Date.now()/1e3;a.forEach((e,r)=>{const o=e.userData.phase,a=.5*Math.sin(2*t+o)+.5;e.material.opacity=e.userData.baseOpacity*(.5+.5*a),e.scale.set(.9+.2*a,.9+.2*a,1)}),requestAnimationFrame(x)};x();const i=new THREE.CircleGeometry(5,16),y=new THREE.MeshBasicMaterial({color:o,transparent:!0,opacity:.5,side:THREE.DoubleSide}),c=new THREE.Mesh(i,y);c.position.set(t,.08,e),c.rotation.x=-Math.PI/2,this.scene.add(c);const h=()=>{const t=Date.now()/1e3,e=.5*Math.sin(3*t)+.5;c.material.opacity=.3+.4*e,c.scale.set(1+.3*e,1+.3*e,1),requestAnimationFrame(h)};h()}}function preloadAllMaps(t,e){const r=Object.keys(MapConfigs),o=r.length;let a=0;console.log("ðŸŽ® å¼€å§‹é¢„åŠ è½½åœ°å›¾èµ„æº...");const x=new THREE.Scene,i=new MapBuilder(x);MapCache.geometries.floor||(MapCache.geometries.floor=new THREE.PlaneGeometry(500,500)),r.forEach(e=>{const r=MapConfigs[e];i.createFloorTexture(r.floorColor1,r.floorColor2),i.getGeometry(250,30,5),i.getGeometry(5,30,250),i.getMaterial(5592405),r.obstacles.forEach(t=>{i.getGeometry(t.w,t.h,t.d),t.color&&i.getMaterial(t.color)}),a++;const x=Math.round(a/o*100);console.log(`ðŸ“¦ é¢„åŠ è½½åœ°å›¾: ${e} (${x}%)`),t&&t(x,e)}),MapCache.isPreloaded=!0,console.log("âœ… æ‰€æœ‰åœ°å›¾èµ„æºé¢„åŠ è½½å®Œæˆ!"),console.log(`   - çº¹ç†ç¼“å­˜: ${Object.keys(MapCache.textures).length} ä¸ª`),console.log(`   - å‡ ä½•ä½“ç¼“å­˜: ${Object.keys(MapCache.geometries).length} ä¸ª`),console.log(`   - æè´¨ç¼“å­˜: ${Object.keys(MapCache.materials).length} ä¸ª`),e&&e()}function isMapPreloaded(){return MapCache.isPreloaded}function getMapsForGameMode(t){const e=[];for(const[r,o]of Object.entries(MapConfigs))o.gameMode&&o.gameMode.includes(t)&&e.push({id:r,name:o.displayName||r});return e}function updateMapSelect(t,e){const r=getMapsForGameMode(e);t.innerHTML="",r.forEach((e,r)=>{const o=document.createElement("option");o.value=e.id,o.textContent=e.name,0===r&&(o.selected=!0),t.appendChild(o)})}function initMapSelect(){const t=document.getElementById("mapSelect"),e=document.getElementById("gameMode");t&&e&&(updateMapSelect(t,e.value),e.addEventListener("change",()=>{updateMapSelect(t,e.value)}))}