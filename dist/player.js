class PlayerModel{static MODEL_SCALE=.7;static createPixelMaterial(E){return new THREE.MeshPhongMaterial({color:E,flatShading:1})}static create(E,e=0,n="ak47"){const t=new THREE.Group,o="ct"===E,w=PlayerModel.MODEL_SCALE,T=PlayerModel.createPixelMaterial(o?1981023:6045747),H=PlayerModel.createPixelMaterial(o?2771567:7098435),R=PlayerModel.createPixelMaterial(o?2450411:9127187),a=PlayerModel.createPixelMaterial(o?1986496:7025936),s=PlayerModel.createPixelMaterial(o?1714746:4007959),c=PlayerModel.createPixelMaterial(o?2767434:5060647),l=PlayerModel.createPixelMaterial(1710618),r=PlayerModel.createPixelMaterial(2763306),M=PlayerModel.createPixelMaterial(o?15254688:13213808),i=PlayerModel.createPixelMaterial(o?13936770:11569248),d=PlayerModel.createPixelMaterial(o?1982639:7027226),h=PlayerModel.createPixelMaterial(o?3035327:8079914),y=PlayerModel.createPixelMaterial(o?2763306:4007959),g=PlayerModel.createPixelMaterial(3815994),P=PlayerModel.createPixelMaterial(2236962),k=PlayerModel.createPixelMaterial(16777215),u=new THREE.Group;u.name="upperBody";const b=new THREE.Group;b.name="leftLeg";const p=new THREE.Group;return p.name="rightLeg",e?PlayerModel.createCrouchingModel(t,u,b,p,{isCT:o,shirtMat:T,shirtLightMat:H,vestMat:R,vestDarkMat:a,pantsMat:s,pantsLightMat:c,bootMat:l,bootDetailMat:r,skinMat:M,skinShadowMat:i,helmetMat:d,helmetLightMat:h,gloveMat:y,beltMat:g,eyeMat:P,eyeWhiteMat:k},n):PlayerModel.createStandingModel(t,u,b,p,{isCT:o,shirtMat:T,shirtLightMat:H,vestMat:R,vestDarkMat:a,pantsMat:s,pantsLightMat:c,bootMat:l,bootDetailMat:r,skinMat:M,skinShadowMat:i,helmetMat:d,helmetLightMat:h,gloveMat:y,beltMat:g,eyeMat:P,eyeWhiteMat:k},n),t.add(u),t.add(b),t.add(p),t.userData.leftLeg=b,t.userData.rightLeg=p,t.userData.upperBody=u,t.userData.walkPhase=0,t.scale.set(w,w,w),t}static createStandingModel(E,e,n,t,o,w){const{isCT:T,shirtMat:H,shirtLightMat:R,vestMat:a,vestDarkMat:s,pantsMat:c,pantsLightMat:l,bootMat:r,bootDetailMat:M,skinMat:i,skinShadowMat:d,helmetMat:h,helmetLightMat:y,gloveMat:g,beltMat:P,eyeMat:k,eyeWhiteMat:u}=o;n.position.set(-1.2,0,0);const b=new THREE.Mesh(new THREE.BoxGeometry(1.8,2,2.2),r);b.position.set(0,1,0),n.add(b);const p=new THREE.Mesh(new THREE.BoxGeometry(1.9,.4,2.3),M);p.position.set(0,2,0),n.add(p);const L=new THREE.Mesh(new THREE.BoxGeometry(.8,.15,.1),new THREE.MeshLambertMaterial({color:4473924}));L.position.set(0,1.5,-1.15),n.add(L);const m=new THREE.Mesh(new THREE.BoxGeometry(1.5,2.5,1.5),c);m.position.set(0,3.2,0),n.add(m);const f=new THREE.Mesh(new THREE.BoxGeometry(1.6,.8,.8),l);f.position.set(0,4.2,-.5),n.add(f);const v=new THREE.Mesh(new THREE.BoxGeometry(1.6,2.5,1.6),c);v.position.set(0,5.7,0),n.add(v),t.position.set(1.2,0,0);const C=new THREE.Mesh(new THREE.BoxGeometry(1.8,2,2.2),r);C.position.set(0,1,0),t.add(C);const D=new THREE.Mesh(new THREE.BoxGeometry(1.9,.4,2.3),M);D.position.set(0,2,0),t.add(D);const S=new THREE.Mesh(new THREE.BoxGeometry(.8,.15,.1),new THREE.MeshLambertMaterial({color:4473924}));S.position.set(0,1.5,-1.15),t.add(S);const F=new THREE.Mesh(new THREE.BoxGeometry(1.5,2.5,1.5),c);F.position.set(0,3.2,0),t.add(F);const W=new THREE.Mesh(new THREE.BoxGeometry(1.6,.8,.8),l);W.position.set(0,4.2,-.5),t.add(W);const z=new THREE.Mesh(new THREE.BoxGeometry(1.6,2.5,1.6),c);z.position.set(0,5.7,0),t.add(z);const A=new THREE.Mesh(new THREE.BoxGeometry(4.3,.6,2.2),P);A.position.set(0,7.2,0),e.add(A);const x=new THREE.Mesh(new THREE.BoxGeometry(.6,.5,.2),new THREE.MeshLambertMaterial({color:11184810}));x.position.set(0,7.2,-1.2),e.add(x);const B=new THREE.Mesh(new THREE.BoxGeometry(4,5,2),H);B.position.set(0,9.5,0),e.add(B);const O=new THREE.Mesh(new THREE.BoxGeometry(4.2,4,2.3),a);O.position.set(0,10,0),e.add(O);const _=new THREE.Mesh(new THREE.BoxGeometry(1,1.2,.3),s);_.position.set(-1.2,10.2,-1.3),e.add(_);const j=new THREE.Mesh(new THREE.BoxGeometry(1,1.2,.3),s);j.position.set(1.2,10.2,-1.3),e.add(j);const q=new THREE.Mesh(new THREE.BoxGeometry(.6,.6,.15),new THREE.MeshLambertMaterial({color:T?16766720:16729156}));q.position.set(0,11,-1.3),e.add(q);const G=new THREE.Mesh(new THREE.BoxGeometry(1.2,.8,1.2),i);G.position.set(0,12.5,0),e.add(G);const I=new THREE.Mesh(new THREE.BoxGeometry(2.8,2.8,2.8),i);I.position.set(0,14.5,0),e.add(I);const J=new THREE.Mesh(new THREE.BoxGeometry(.3,.6,.4),d);J.position.set(-1.5,14.5,0),e.add(J);const K=new THREE.Mesh(new THREE.BoxGeometry(.3,.6,.4),d);K.position.set(1.5,14.5,0),e.add(K),PlayerModel.addFacialFeatures(e,T,i,d,k,u),PlayerModel.addHeadgear(e,T,h,y);const N=new THREE.Mesh(new THREE.BoxGeometry(1.5,1.2,1.5),H);N.position.set(-2.5,11.5,0),e.add(N);const Q=new THREE.Mesh(new THREE.BoxGeometry(1.6,.3,1.6),R);Q.position.set(-2.5,12.1,0),e.add(Q);const U=new THREE.Mesh(new THREE.BoxGeometry(1.5,1.2,1.5),H);U.position.set(2.5,11.5,0),e.add(U);const V=new THREE.Mesh(new THREE.BoxGeometry(1.6,.3,1.6),R);V.position.set(2.5,12.1,0),e.add(V),PlayerModel.addArms(e,H,g,0);const X=PlayerModel.createWeaponModelHolding(w,0);X&&(e.add(X),E.userData.weaponModel=X);const Y=PlayerModel.createMuzzleFlashHolding(w,0);Y&&(Y.visible=0,e.add(Y),E.userData.muzzleFlash=Y)}static addFacialFeatures(E,e,n,t,o,w){const T=-1.5;if(e){const e=new THREE.Mesh(new THREE.BoxGeometry(.4,.5,.4),t);e.position.set(0,14.2,T),E.add(e);const n=new THREE.Mesh(new THREE.BoxGeometry(1.2,.4,.2),t);n.position.set(0,13.5,T),E.add(n)}else{const e=new THREE.Mesh(new THREE.BoxGeometry(.5,.35,.15),w);e.position.set(-.55,14.7,T),E.add(e);const n=new THREE.Mesh(new THREE.BoxGeometry(.5,.35,.15),w);n.position.set(.55,14.7,T),E.add(n);const t=new THREE.Mesh(new THREE.BoxGeometry(.25,.25,.1),o);t.position.set(-.55,14.7,-1.6),E.add(t);const H=new THREE.Mesh(new THREE.BoxGeometry(.25,.25,.1),o);H.position.set(.55,14.7,-1.6),E.add(H);const R=new THREE.Mesh(new THREE.BoxGeometry(.6,.15,.1),new THREE.MeshLambertMaterial({color:3811866}));R.position.set(-.55,15.05,T),R.rotation.z=.1,E.add(R);const a=new THREE.Mesh(new THREE.BoxGeometry(.6,.15,.1),new THREE.MeshLambertMaterial({color:3811866}));a.position.set(.55,15.05,T),a.rotation.z=-.1,E.add(a)}}static addHeadgear(E,e,n,t){if(e){const e=new THREE.Mesh(new THREE.BoxGeometry(3.2,2,3.2),n);e.position.set(0,16,0),E.add(e);const o=new THREE.Mesh(new THREE.BoxGeometry(3.4,.3,3.4),t);o.position.set(0,15.1,0),E.add(o);const w=new THREE.Mesh(new THREE.BoxGeometry(2.5,.8,.3),new THREE.MeshLambertMaterial({color:3355443,transparent:1,opacity:.8}));w.position.set(0,14.8,-1.5),E.add(w);const T=new THREE.Mesh(new THREE.BoxGeometry(.8,.3,.1),new THREE.MeshBasicMaterial({color:6719658}));T.position.set(-.5,14.9,-1.65),E.add(T);const H=new THREE.Mesh(new THREE.BoxGeometry(.8,.8,.15),new THREE.MeshLambertMaterial({color:4890367}));H.position.set(0,16.2,-1.7),E.add(H)}else{const e=new THREE.Mesh(new THREE.BoxGeometry(3,1.5,3),n);e.position.set(0,15.8,0),E.add(e);const o=new THREE.Mesh(new THREE.BoxGeometry(3.1,.3,3.1),t);o.position.set(0,15.2,0),E.add(o);const w=new THREE.Mesh(new THREE.BoxGeometry(1.5,2,.3),n);w.position.set(0,14.5,1.6),w.rotation.x=-.2,E.add(w);const T=new THREE.Mesh(new THREE.BoxGeometry(1.8,.8,.3),new THREE.MeshLambertMaterial({color:2763306}));T.position.set(0,13.8,-1.5),E.add(T)}}static addArms(E,e,n,t){const o=t?7:10,w=new THREE.Mesh(new THREE.BoxGeometry(1.2,2.5,1.2),e);w.position.set(-2.2,o,t?-2:-1),w.rotation.x=-.8,E.add(w);const T=new THREE.Mesh(new THREE.BoxGeometry(1.1,2,1.1),e);T.position.set(-1.5,o-1,t?-3.5:-2.5),T.rotation.x=-1.2,E.add(T);const H=new THREE.Mesh(new THREE.BoxGeometry(.9,.9,.9),n);H.position.set(-1.2,o-1,t?-4.5:-3.5),E.add(H);const R=new THREE.Mesh(new THREE.BoxGeometry(1.2,2.5,1.2),e);R.position.set(2.2,o,t?-1.5:-.5),R.rotation.x=-.5,E.add(R);const a=new THREE.Mesh(new THREE.BoxGeometry(1.1,2,1.1),e);a.position.set(1.8,o-1,t?-2.5:-1.5),a.rotation.x=-.8,E.add(a);const s=new THREE.Mesh(new THREE.BoxGeometry(.9,.9,.9),n);s.position.set(1.5,o-1,t?-3.2:-2.2),E.add(s)}static createCrouchingModel(E,e,n,t,o,w){const{isCT:T,shirtMat:H,shirtLightMat:R,vestMat:a,vestDarkMat:s,pantsMat:c,pantsLightMat:l,bootMat:r,bootDetailMat:M,skinMat:i,skinShadowMat:d,helmetMat:h,helmetLightMat:y,gloveMat:g,beltMat:P,eyeMat:k,eyeWhiteMat:u}=o;n.userData={isCrouching:1},t.userData={isCrouching:1},n.position.set(-1.5,0,1),t.position.set(1.5,0,1);const b=new THREE.Mesh(new THREE.BoxGeometry(1.8,2,2.2),r);b.position.set(0,1,0),n.add(b);const p=new THREE.Mesh(new THREE.BoxGeometry(1.5,1.5,3),c);p.position.set(0,2.5,-1.5),n.add(p);const L=new THREE.Mesh(new THREE.BoxGeometry(1.6,3,1.6),c);L.position.set(0,4.5,-2.5),L.rotation.x=-.3,n.add(L);const m=new THREE.Mesh(new THREE.BoxGeometry(1.8,2,2.2),r);m.position.set(0,1,0),t.add(m);const f=new THREE.Mesh(new THREE.BoxGeometry(1.5,1.5,3),c);f.position.set(0,2.5,-1.5),t.add(f);const v=new THREE.Mesh(new THREE.BoxGeometry(1.6,3,1.6),c);v.position.set(0,4.5,-2.5),v.rotation.x=-.3,t.add(v);const C=new THREE.Mesh(new THREE.BoxGeometry(4.3,.6,2.2),P);C.position.set(0,5.8,-1),e.add(C);const D=new THREE.Mesh(new THREE.BoxGeometry(4,4,2),H);D.position.set(0,7,-1),e.add(D);const S=new THREE.Mesh(new THREE.BoxGeometry(4.2,3.5,2.3),a);S.position.set(0,7.2,-1),e.add(S);const F=new THREE.Mesh(new THREE.BoxGeometry(1.2,.8,1.2),i);F.position.set(0,9.5,-1),e.add(F);const W=new THREE.Mesh(new THREE.BoxGeometry(2.8,2.8,2.8),i);W.position.set(0,11.5,-1),e.add(W),PlayerModel.addFacialFeaturesCrouching(e,T,i,d,k,u),PlayerModel.addHeadgearCrouching(e,T,h,y);const z=new THREE.Mesh(new THREE.BoxGeometry(1.5,1.2,1.5),H);z.position.set(-2.5,8.5,-1),e.add(z);const A=new THREE.Mesh(new THREE.BoxGeometry(1.5,1.2,1.5),H);A.position.set(2.5,8.5,-1),e.add(A),PlayerModel.addArms(e,H,g,1);const x=PlayerModel.createWeaponModelHolding(w,1);x&&(e.add(x),E.userData.weaponModel=x);const B=PlayerModel.createMuzzleFlashHolding(w,1);B&&(B.visible=0,e.add(B),E.userData.muzzleFlash=B)}static addFacialFeaturesCrouching(E,e,n,t,o,w){const T=-2.5;if(e){const e=new THREE.Mesh(new THREE.BoxGeometry(.4,.5,.4),t);e.position.set(0,11.2,T),E.add(e);const n=new THREE.Mesh(new THREE.BoxGeometry(1.2,.4,.2),t);n.position.set(0,10.5,T),E.add(n)}else{const e=new THREE.Mesh(new THREE.BoxGeometry(.5,.35,.15),w);e.position.set(-.55,11.7,T),E.add(e);const n=new THREE.Mesh(new THREE.BoxGeometry(.5,.35,.15),w);n.position.set(.55,11.7,T),E.add(n);const t=new THREE.Mesh(new THREE.BoxGeometry(.25,.25,.1),o);t.position.set(-.55,11.7,-2.6),E.add(t);const H=new THREE.Mesh(new THREE.BoxGeometry(.25,.25,.1),o);H.position.set(.55,11.7,-2.6),E.add(H);const R=new THREE.Mesh(new THREE.BoxGeometry(.6,.15,.1),new THREE.MeshLambertMaterial({color:3811866}));R.position.set(-.55,12.05,T),R.rotation.z=.1,E.add(R);const a=new THREE.Mesh(new THREE.BoxGeometry(.6,.15,.1),new THREE.MeshLambertMaterial({color:3811866}));a.position.set(.55,12.05,T),a.rotation.z=-.1,E.add(a)}}static addHeadgearCrouching(E,e,n,t){if(e){const e=new THREE.Mesh(new THREE.BoxGeometry(3.2,2,3.2),n);e.position.set(0,13,-1),E.add(e);const t=new THREE.Mesh(new THREE.BoxGeometry(2.5,.8,.3),new THREE.MeshLambertMaterial({color:3355443}));t.position.set(0,11.8,-2.5),E.add(t);const o=new THREE.Mesh(new THREE.BoxGeometry(.8,.3,.1),new THREE.MeshBasicMaterial({color:6719658}));o.position.set(-.5,11.9,-2.65),E.add(o)}else{const e=new THREE.Mesh(new THREE.BoxGeometry(3,1.5,3),n);e.position.set(0,12.8,-1),E.add(e);const t=new THREE.Mesh(new THREE.BoxGeometry(1.8,.8,.3),new THREE.MeshLambertMaterial({color:2763306}));t.position.set(0,10.8,-2.5),E.add(t)}}static animateWalk(E,e){if(!E||!E.userData.leftLeg||!E.userData.rightLeg)return;const n=E.userData.leftLeg,t=E.userData.rightLeg;if(n.userData&&n.userData.isCrouching)return;const o=1.5*Math.sin(e);n.position.z=o,t.position.z=-o,n.position.y=.5*Math.max(0,Math.sin(e)),t.position.y=.5*Math.max(0,-Math.sin(e))}static resetLegs(E){E&&E.userData.leftLeg&&E.userData.rightLeg&&(E.userData.leftLeg.position.z=0,E.userData.rightLeg.position.z=0,E.userData.leftLeg.position.y=0,E.userData.rightLeg.position.y=0)}static createWeaponModelHolding(E,e=0){const n=new THREE.MeshLambertMaterial({color:2763306}),t=new THREE.MeshLambertMaterial({color:6045747}),o=new THREE.MeshLambertMaterial({color:1710618}),w=new THREE.MeshLambertMaterial({color:2968109}),T=new THREE.Group,H=e?6.5:9,R=e?-4:-3;switch(E){case"ak47":const E=new THREE.Mesh(new THREE.BoxGeometry(.5,.6,3.5),t);E.position.set(0,H,R),T.add(E);const e=new THREE.Mesh(new THREE.BoxGeometry(.25,.25,2.5),n);e.position.set(0,H+.2,R-2.5),T.add(e);const a=new THREE.Mesh(new THREE.BoxGeometry(.35,1.2,.5),new THREE.MeshLambertMaterial({color:4864554}));a.position.set(0,H-.8,R+.5),a.rotation.x=.2,T.add(a);const s=new THREE.Mesh(new THREE.BoxGeometry(.4,.5,1.5),t);s.position.set(0,H-.1,R+2.2),T.add(s);break;case"m4a1":const c=new THREE.Mesh(new THREE.BoxGeometry(.45,.55,3.2),o);c.position.set(0,H,R),T.add(c);const l=new THREE.Mesh(new THREE.BoxGeometry(.2,.2,2),n);l.position.set(0,H+.15,R-2.2),T.add(l);const r=new THREE.Mesh(new THREE.BoxGeometry(.3,.3,1),new THREE.MeshLambertMaterial({color:3355443}));r.position.set(0,H+.15,R-3.5),T.add(r);const M=new THREE.Mesh(new THREE.BoxGeometry(.3,1,.4),o);M.position.set(0,H-.7,R+.3),T.add(M);const i=new THREE.Mesh(new THREE.BoxGeometry(.35,.45,1.2),o);i.position.set(0,H,R+2),T.add(i);break;case"awp":const d=new THREE.Mesh(new THREE.BoxGeometry(.5,.65,4),w);d.position.set(0,H,R-.5),T.add(d);const h=new THREE.Mesh(new THREE.BoxGeometry(.25,.25,3.5),n);h.position.set(0,H+.2,R-3.5),T.add(h);const y=new THREE.Mesh(new THREE.BoxGeometry(.35,.35,1.5),n);y.position.set(0,H+.6,R),T.add(y);const g=new THREE.Mesh(new THREE.BoxGeometry(.35,.8,.5),w);g.position.set(0,H-.6,R+.2),T.add(g);const P=new THREE.Mesh(new THREE.BoxGeometry(.4,.5,1.5),w);P.position.set(0,H-.1,R+2.5),T.add(P);break;case"pistol":const k=new THREE.Mesh(new THREE.BoxGeometry(.25,.4,1.2),o);k.position.set(1.5,H,R+1),T.add(k);const u=new THREE.Mesh(new THREE.BoxGeometry(.15,.15,.8),n);u.position.set(1.5,H+.1,R+.2),T.add(u);break;case"knife":const b=new THREE.Mesh(new THREE.BoxGeometry(.12,.3,1.5),new THREE.MeshLambertMaterial({color:11184810}));b.position.set(1.5,H,R+.5),T.add(b);const p=new THREE.Mesh(new THREE.BoxGeometry(.2,.25,.7),new THREE.MeshLambertMaterial({color:4007959}));p.position.set(1.5,H,R+1.5),T.add(p);break;case"grenade":const L=new THREE.Mesh(new THREE.SphereGeometry(.4,8,8),w);L.position.set(1.5,H,R+1),T.add(L);break;default:return null}return T}static createMuzzleFlashHolding(E,e=0){if("knife"===E||"grenade"===E)return null;const n=new THREE.MeshBasicMaterial({color:16776960,transparent:1,opacity:.9}),t=new THREE.Group,o=e?6.5:9,w=e?-4:-3,T=new THREE.Mesh(new THREE.SphereGeometry(.35,6,6),n);switch(E){case"ak47":T.position.set(0,o+.2,w-3.8);break;case"m4a1":T.position.set(0,o+.15,w-4),T.scale.set(.8,.8,.8);break;case"awp":T.position.set(0,o+.2,w-5.5),T.scale.set(1.5,1.5,1.5);break;case"pistol":T.position.set(1.5,o+.1,w-.3),T.scale.set(.5,.5,.5)}return t.add(T),t}static showMuzzleFlash(E){E&&E.userData.muzzleFlash&&(E.userData.muzzleFlash.visible=1,setTimeout(()=>{E.userData.muzzleFlash&&(E.userData.muzzleFlash.visible=0)},50))}}