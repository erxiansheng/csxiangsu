const WeaponConfigs={ak47:{ammo:30,fireRate:100,recoil:.12,recoilIncrease:.015,maxRecoil:.35,spread:.025,auto:!0,name:"AK-47",slot:"primary"},m4a1:{ammo:30,fireRate:90,recoil:.08,recoilIncrease:.01,maxRecoil:.25,spread:.018,auto:!0,name:"M4A1",slot:"primary"},awp:{ammo:10,fireRate:1500,recoil:.3,recoilIncrease:0,maxRecoil:.3,spread:.005,auto:!1,name:"AWP",slot:"primary"},pistol:{ammo:12,fireRate:200,recoil:.05,recoilIncrease:.008,maxRecoil:.15,spread:.015,auto:!1,name:"USP",slot:"secondary"},knife:{ammo:-1,fireRate:500,recoil:0,recoilIncrease:0,maxRecoil:0,spread:0,auto:!1,name:"军刀",slot:"melee"},grenade:{ammo:1,fireRate:1e3,recoil:0,recoilIncrease:0,maxRecoil:0,spread:0,auto:!1,name:"手雷",slot:"grenade"},c4:{ammo:-1,fireRate:0,recoil:0,recoilIncrease:0,maxRecoil:0,spread:0,auto:!1,name:"C4炸弹",slot:"bomb"}};class WeaponModelBuilder{constructor(E){this.team=E,this.metalMat=new THREE.MeshLambertMaterial({color:2763306}),this.woodMat=new THREE.MeshLambertMaterial({color:6045747}),this.skinMat=new THREE.MeshLambertMaterial({color:14596231}),this.sleeveMat=new THREE.MeshLambertMaterial({color:"ct"===E?1981023:6045747})}createTextTexture(E,e,n="#FFD700"){const R=document.createElement("canvas");R.width=512,R.height=128;const o=R.getContext("2d");o.fillStyle=e,o.fillRect(0,0,R.width,R.height),o.fillStyle=n,o.font="bold 60px Arial",o.textAlign="center",o.textBaseline="middle",o.fillText(E,R.width/2,R.height/2);const w=new THREE.CanvasTexture(R);return w.needsUpdate=!0,w}createModel(E){const e=new THREE.Group;switch(E){case"ak47":default:this.createAK47(e);break;case"m4a1":this.createM4A1(e);break;case"awp":this.createAWP(e);break;case"pistol":this.createPistol(e);break;case"knife":this.createKnife(e);break;case"grenade":this.createGrenade(e);break;case"c4":this.createC4(e)}return e.traverse(E=>{E.isMesh&&(E.frustumCulled=!1)}),e}addArmsWithForegrip(E,e){const n=new THREE.Mesh(new THREE.BoxGeometry(.1,.1,.2),this.sleeveMat);n.position.set(.14,-.12,.1),E.add(n);const R=new THREE.Mesh(new THREE.BoxGeometry(.07,.07,.1),this.skinMat);R.position.set(.1,-.08,-.02),E.add(R);const o=new THREE.Mesh(new THREE.BoxGeometry(.09,.09,.15),this.sleeveMat);o.position.set(-.1,-.06,e+.15),E.add(o);const w=new THREE.Mesh(new THREE.BoxGeometry(.06,.06,.12),this.skinMat);w.position.set(-.06,-.04,e),E.add(w)}createAK47(E){const e=new THREE.MeshLambertMaterial({color:1710618}),n=new THREE.MeshLambertMaterial({color:13934615}),R=new THREE.MeshLambertMaterial({color:4007959}),o=new THREE.MeshLambertMaterial({color:7029795}),w=new THREE.Mesh(new THREE.BoxGeometry(.055,.09,.22),R);w.position.set(0,-.02,.12),E.add(w);const T=new THREE.Mesh(new THREE.BoxGeometry(.05,.06,.08),R);T.position.set(0,-.06,.2),E.add(T);const H=new THREE.Mesh(new THREE.BoxGeometry(.06,.1,.02),this.metalMat);H.position.set(0,-.02,.24),E.add(H);const t=new THREE.Mesh(new THREE.BoxGeometry(.065,.085,.28),e);t.position.set(0,.02,-.08),E.add(t);const c=new THREE.Mesh(new THREE.BoxGeometry(.055,.025,.22),e);c.position.set(0,.065,-.06),E.add(c);const s=new THREE.Mesh(new THREE.BoxGeometry(.02,.03,.06),new THREE.MeshLambertMaterial({color:3355443}));s.position.set(.035,.04,-.05),E.add(s);const a=new THREE.Mesh(new THREE.BoxGeometry(.04,.035,.08),n);a.position.set(0,.085,-.02),E.add(a);const r=new THREE.Mesh(new THREE.BoxGeometry(.035,.025,.015),n);r.position.set(0,.105,.01),E.add(r);const i=new THREE.Mesh(new THREE.BoxGeometry(.015,.03,.02),e);i.position.set(0,.11,.01),E.add(i);const l=new THREE.Mesh(new THREE.BoxGeometry(.07,.1,.18),o);l.position.set(0,0,-.3),E.add(l);const h=new THREE.Mesh(new THREE.BoxGeometry(.05,.02,.16),e);h.position.set(0,.055,-.3),E.add(h);const m=new THREE.Mesh(new THREE.BoxGeometry(.06,.03,.14),R);m.position.set(0,-.06,-.3),E.add(m);const d=new THREE.Mesh(new THREE.BoxGeometry(.035,.035,.04),e);d.position.set(0,.06,-.42),E.add(d);const p=new THREE.Mesh(new THREE.BoxGeometry(.02,.02,.25),e);p.position.set(0,.075,-.28),E.add(p);const u=new THREE.Mesh(new THREE.BoxGeometry(.035,.035,.35),e);u.position.set(0,.035,-.58),E.add(u);const f=new THREE.Mesh(new THREE.BoxGeometry(.02,.02,.36),new THREE.MeshLambertMaterial({color:1118481}));f.position.set(0,.035,-.58),E.add(f);const F=new THREE.Mesh(new THREE.BoxGeometry(.04,.04,.025),e);F.position.set(0,.06,-.72),E.add(F);const M=new THREE.Mesh(new THREE.BoxGeometry(.015,.055,.015),e);M.position.set(0,.095,-.72),E.add(M);const A=new THREE.Mesh(new THREE.BoxGeometry(.008,.04,.015),e);A.position.set(-.018,.085,-.72),E.add(A);const k=new THREE.Mesh(new THREE.BoxGeometry(.008,.04,.015),e);k.position.set(.018,.085,-.72),E.add(k);const x=new THREE.Mesh(new THREE.BoxGeometry(.045,.045,.06),e);x.position.set(0,.035,-.78),E.add(x);const b=new THREE.Mesh(new THREE.BoxGeometry(.05,.015,.02),new THREE.MeshLambertMaterial({color:657930}));b.position.set(0,.055,-.77),E.add(b);const I=new THREE.Mesh(new THREE.BoxGeometry(.05,.015,.02),new THREE.MeshLambertMaterial({color:657930}));I.position.set(0,.015,-.77),E.add(I);const W=new THREE.MeshLambertMaterial({color:2763306}),P=new THREE.Mesh(new THREE.BoxGeometry(.055,.18,.07),W);P.position.set(0,-.12,-.15),P.rotation.x=.18,E.add(P);const g=new THREE.Mesh(new THREE.BoxGeometry(.05,.025,.06),W);g.position.set(0,-.22,-.12),P.rotation.x=.18,E.add(g);const y=new THREE.Mesh(new THREE.BoxGeometry(.02,.025,.02),e);y.position.set(0,-.02,-.12),E.add(y);const v=new THREE.Mesh(new THREE.BoxGeometry(.045,.1,.04),R);v.position.set(0,-.08,.02),v.rotation.x=.25,E.add(v);const B=new THREE.Mesh(new THREE.BoxGeometry(.04,.02,.035),R);B.position.set(0,-.14,.04),E.add(B);const C=new THREE.Mesh(new THREE.BoxGeometry(.05,.025,.06),e);C.position.set(0,-.04,-.02),E.add(C);const K=new THREE.Mesh(new THREE.BoxGeometry(.015,.03,.015),e);K.position.set(0,-.03,-.01),E.add(K);const D=new THREE.Mesh(new THREE.BoxGeometry(.025,.015,.04),e);D.position.set(.04,.01,.02),E.add(D);const G=new THREE.Mesh(new THREE.BoxGeometry(.025,.02,.03),e);G.position.set(.045,.04,-.02),E.add(G),this.addArmsWithForegrip(E,-.4),E.position.set(.25,-.2,-.4),E.rotation.set(0,.08,0)}createM4A1(E){const e=new THREE.MeshLambertMaterial({color:1710618}),n=new THREE.Mesh(new THREE.BoxGeometry(.07,.1,.45),e);n.position.set(0,0,-.2),E.add(n);const R=this.createTextTexture("M4A1-内测外观","#1a1a1a","#00BFFF"),o=new THREE.MeshBasicMaterial({map:R,transparent:!0}),w=new THREE.Mesh(new THREE.PlaneGeometry(.36,.105),o);w.position.set(.036,0,-.2),w.rotation.y=Math.PI/2,E.add(w);const T=this.createTextTexture("M4A1-内测外观","#1a1a1a","#00BFFF"),H=new THREE.MeshBasicMaterial({map:T,transparent:!0}),t=new THREE.Mesh(new THREE.PlaneGeometry(.36,.105),H);t.position.set(-.036,0,-.2),t.rotation.y=-Math.PI/2,E.add(t);const c=new THREE.Mesh(new THREE.BoxGeometry(.04,.06,.15),e);c.position.set(0,.08,-.15),E.add(c);const s=new THREE.Mesh(new THREE.BoxGeometry(.035,.035,.45),this.metalMat);s.position.set(0,.03,-.65),E.add(s);const a=new THREE.Mesh(new THREE.BoxGeometry(.05,.05,.15),new THREE.MeshLambertMaterial({color:3355443}));a.position.set(0,.03,-.95),E.add(a);const r=new THREE.Mesh(new THREE.BoxGeometry(.045,.16,.06),e);r.position.set(0,-.12,-.18),E.add(r);const i=new THREE.Mesh(new THREE.BoxGeometry(.05,.08,.18),e);i.position.set(0,-.01,.1),E.add(i);const l=new THREE.Mesh(new THREE.BoxGeometry(.04,.1,.04),e);l.position.set(0,-.09,0),l.rotation.x=.25,E.add(l),this.addArmsWithForegrip(E,-.45),E.position.set(.25,-.2,-.4),E.rotation.set(0,.08,0)}createAWP(E){const e=new THREE.MeshLambertMaterial({color:2968109}),n=new THREE.Mesh(new THREE.BoxGeometry(.09,.12,.6),e);n.position.set(0,0,-.3),E.add(n);const R=this.createTextTexture("AWP-内测外观","#2d4a2d","#FF4500"),o=new THREE.MeshBasicMaterial({map:R,transparent:!0}),w=new THREE.Mesh(new THREE.PlaneGeometry(.36,.105),o);w.position.set(.046,0,-.3),w.rotation.y=Math.PI/2,E.add(w);const T=this.createTextTexture("AWP-内测外观","#2d4a2d","#FF4500"),H=new THREE.MeshBasicMaterial({map:T,transparent:!0}),t=new THREE.Mesh(new THREE.PlaneGeometry(.36,.105),H);t.position.set(-.046,0,-.3),t.rotation.y=-Math.PI/2,E.add(t);const c=new THREE.Mesh(new THREE.BoxGeometry(.045,.045,.55),this.metalMat);c.position.set(0,.04,-.85),E.add(c);const s=new THREE.Mesh(new THREE.BoxGeometry(.06,.06,.25),this.metalMat);s.position.set(0,.12,-.25),E.add(s);const a=new THREE.Mesh(new THREE.BoxGeometry(.05,.05,.02),new THREE.MeshBasicMaterial({color:4491519}));a.position.set(0,.12,-.38),E.add(a);const r=new THREE.Mesh(new THREE.BoxGeometry(.06,.12,.08),e);r.position.set(0,-.1,-.2),E.add(r);const i=new THREE.Mesh(new THREE.BoxGeometry(.07,.1,.2),e);i.position.set(0,-.02,.1),E.add(i);const l=new THREE.Mesh(new THREE.BoxGeometry(.015,.15,.015),this.metalMat);l.position.set(-.04,-.1,-.5),l.rotation.x=.3,E.add(l);const h=new THREE.Mesh(new THREE.BoxGeometry(.015,.15,.015),this.metalMat);h.position.set(.04,-.1,-.5),h.rotation.x=.3,E.add(h),this.addArmsWithForegrip(E,-.5),E.position.set(.25,-.2,-.4),E.rotation.set(0,.08,0)}createPistol(E){const e=new THREE.MeshLambertMaterial({color:1710618}),n=new THREE.Mesh(new THREE.BoxGeometry(.04,.06,.18),e);n.position.set(0,.02,-.12),E.add(n);const R=new THREE.Mesh(new THREE.BoxGeometry(.025,.025,.14),this.metalMat);R.position.set(0,.02,-.25),E.add(R);const o=new THREE.Mesh(new THREE.BoxGeometry(.035,.1,.06),e);o.position.set(0,-.06,-.02),o.rotation.x=.15,E.add(o);const w=new THREE.Mesh(new THREE.BoxGeometry(.03,.04,.04),e);w.position.set(0,-.03,-.08),E.add(w);const T=new THREE.Mesh(new THREE.BoxGeometry(.07,.07,.1),this.skinMat);T.position.set(.02,-.06,.02),E.add(T);const H=new THREE.Mesh(new THREE.BoxGeometry(.09,.09,.18),this.sleeveMat);H.position.set(.06,-.08,.15),E.add(H),E.position.set(.25,-.2,-.4),E.rotation.set(0,.08,0)}createKnife(E){const e=new THREE.MeshLambertMaterial({color:13421772}),n=new THREE.MeshLambertMaterial({color:16777215}),R=new THREE.MeshLambertMaterial({color:6710886}),o=new THREE.Mesh(new THREE.BoxGeometry(.015,.045,.28),e);o.position.set(0,0,-.2),E.add(o);const w=new THREE.Mesh(new THREE.BoxGeometry(.008,.02,.28),n);w.position.set(0,.015,-.2),E.add(w);const T=new THREE.Mesh(new THREE.BoxGeometry(.012,.015,.26),R);T.position.set(0,-.018,-.19),E.add(T);const H=new THREE.Mesh(new THREE.BoxGeometry(.015,.03,.06),e);H.position.set(0,.005,-.36),H.rotation.x=.4,E.add(H);const t=new THREE.MeshLambertMaterial({color:13934615}),c=new THREE.Mesh(new THREE.BoxGeometry(.06,.07,.025),t);c.position.set(0,0,-.05),E.add(c);const s=new THREE.Mesh(new THREE.BoxGeometry(.065,.075,.01),new THREE.MeshLambertMaterial({color:12092939}));s.position.set(0,0,-.04),E.add(s);const a=new THREE.MeshLambertMaterial({color:13369344,emissive:3342336}),r=new THREE.Mesh(new THREE.BoxGeometry(.025,.025,.015),a);r.position.set(0,0,-.05),r.rotation.z=Math.PI/4,E.add(r);const i=new THREE.MeshLambertMaterial({color:6042391}),l=new THREE.MeshLambertMaterial({color:4006418}),h=new THREE.Mesh(new THREE.BoxGeometry(.04,.05,.14),i);h.position.set(0,0,.04),E.add(h);for(let e=0;e<5;e++){const n=new THREE.Mesh(new THREE.BoxGeometry(.045,.055,.015),l);n.position.set(0,0,.03*e-.02),E.add(n)}const m=new THREE.MeshLambertMaterial({color:13934615}),d=new THREE.Mesh(new THREE.BoxGeometry(.05,.06,.03),m);d.position.set(0,0,.125),E.add(d);const p=new THREE.MeshLambertMaterial({color:52945,emissive:13107}),u=new THREE.Mesh(new THREE.SphereGeometry(.018,8,8),p);u.position.set(0,0,.14),E.add(u);const f=new THREE.Mesh(new THREE.BoxGeometry(.07,.07,.1),this.skinMat);f.position.set(.02,-.02,.04),E.add(f);const F=new THREE.Mesh(new THREE.BoxGeometry(.09,.09,.18),this.sleeveMat);F.position.set(.06,-.04,.18),E.add(F),E.position.set(.25,-.18,-.35),E.rotation.set(-.15,.1,0)}createGrenade(E){const e=new THREE.MeshLambertMaterial({color:2968109}),n=new THREE.Mesh(new THREE.SphereGeometry(.07,8,8),e);n.position.set(0,0,-.1),E.add(n);const R=new THREE.Mesh(new THREE.BoxGeometry(.015,.1,.025),new THREE.MeshLambertMaterial({color:8947848}));R.position.set(.04,.03,-.1),E.add(R);const o=new THREE.Mesh(new THREE.BoxGeometry(.03,.03,.01),new THREE.MeshLambertMaterial({color:8947848}));o.position.set(0,.08,-.1),E.add(o);const w=new THREE.Mesh(new THREE.BoxGeometry(.07,.07,.1),this.skinMat);w.position.set(.02,-.02,0),E.add(w);const T=new THREE.Mesh(new THREE.BoxGeometry(.09,.09,.18),this.sleeveMat);T.position.set(.06,-.04,.14),E.add(T),E.position.set(.25,-.2,-.4),E.rotation.set(0,.08,0)}createC4(E){const e=new THREE.MeshLambertMaterial({color:2960685}),n=new THREE.MeshLambertMaterial({color:3355443}),R=new THREE.Mesh(new THREE.BoxGeometry(.15,.08,.1),e);R.position.set(0,0,-.1),E.add(R);const o=new THREE.MeshBasicMaterial({color:16711680}),w=new THREE.Mesh(new THREE.SphereGeometry(.015,8,8),o);w.position.set(0,.045,-.1),E.add(w);const T=new THREE.Mesh(new THREE.CylinderGeometry(.008,.008,.08,8),n);T.position.set(.05,0,-.05),T.rotation.z=Math.PI/4,E.add(T);const H=new THREE.Mesh(new THREE.CylinderGeometry(.008,.008,.08,8),n);H.position.set(-.05,0,-.05),H.rotation.z=-Math.PI/4,E.add(H);const t=new THREE.MeshBasicMaterial({color:65280}),c=new THREE.Mesh(new THREE.BoxGeometry(.06,.03,.005),t);c.position.set(0,.02,-.155),E.add(c);const s=new THREE.Mesh(new THREE.BoxGeometry(.07,.07,.1),this.skinMat);s.position.set(.08,-.04,0),E.add(s);const a=new THREE.Mesh(new THREE.BoxGeometry(.09,.09,.18),this.sleeveMat);a.position.set(.1,-.06,.14),E.add(a);const r=new THREE.Mesh(new THREE.BoxGeometry(.06,.06,.08),this.skinMat);r.position.set(-.08,-.04,-.1),E.add(r);const i=new THREE.Mesh(new THREE.BoxGeometry(.08,.08,.15),this.sleeveMat);i.position.set(-.12,-.06,0),E.add(i),E.position.set(.2,-.15,-.35),E.rotation.set(.1,.08,0)}}